# 共识文档 - 内圈样式重构

## 明确的需求描述

重构预览卡片（`AestheticPreviewCard`）的内圈样式设计，解决以下核心问题：
1. **视觉结构单一**：装饰性渐变圆形元素缺乏层次和节奏
2. **信息缺失**：系统提示词未被纳入预览展示
3. **空间浪费**：装饰元素占用空间但无信息价值

## 技术实现方案

### 1. 内圈装饰元素重构

#### 当前实现（问题）
- 仅有两个简单的径向渐变圆形（top-left, bottom-right）
- 单一颜色，缺乏层次
- 纯装饰性，无功能价值

#### 新设计方案
**多层次装饰系统**：
- **外层装饰圈**：大范围渐变光晕（保持现有位置，增强效果）
- **中层装饰圈**：中等大小的渐变圆形，增加视觉层次
- **内层装饰圈**：小范围高亮装饰，引导视觉焦点
- **动态效果**：微妙的呼吸动画和渐变流动效果

**配色策略**：
- 主色调：根据主题动态变化（保持现有逻辑）
- 辅助色：添加互补色和邻近色，形成色彩层次
- 透明度层次：使用不同透明度（0.1, 0.15, 0.2, 0.25）创建深度

### 2. 系统提示词集成

#### 展示位置
在代码块（主提示词）上方添加独立的系统提示词区域

#### 视觉设计
- **独立卡片样式**：与主提示词代码块区分
- **特殊标识**：使用图标和标签明确标识为"System Instruction"
- **样式区分**：
  - 背景色：略浅于主代码块，使用半透明背景
  - 边框：使用主题色的细边框
  - 字体：与主提示词区分，使用不同的字重和大小

#### 布局方案
```
┌─────────────────────────────────┐
│  Category Badge                 │
│  Title                          │
│  Description                    │
│                                 │
│  ┌───────────────────────────┐ │
│  │ System Instruction        │ │ ← 新增区域
│  │ [系统提示词内容]          │ │
│  └───────────────────────────┘ │
│                                 │
│  ┌───────────────────────────┐ │
│  │ PROMPT                    │ │
│  │ [主提示词内容]            │ │
│  └───────────────────────────┘ │
└─────────────────────────────────┘
```

### 3. 信息组织优化

#### 层次结构
1. **视觉层次**：使用大小、颜色、间距建立清晰层次
2. **信息层次**：
   - 一级：标题、分类
   - 二级：描述
   - 三级：系统提示词（新增）
   - 四级：主提示词

#### 空间利用
- **垂直空间**：合理分配各元素间距，避免浪费
- **水平空间**：利用装饰元素引导视觉，而非占用内容空间
- **响应式**：在不同屏幕尺寸下优化空间利用

### 4. 视觉节奏增强

#### 设计元素
- **大小节奏**：装饰元素从小到大形成节奏
- **颜色节奏**：主色→辅助色→高光色的渐变节奏
- **间距节奏**：元素间距遵循黄金比例或8px网格系统
- **动画节奏**：微妙的动画效果增强视觉流动感

## 技术约束和集成方案

### 保持兼容性
- **Props接口**：不修改 `AestheticPreviewCard` 的 props
- **数据源**：从 `data.systemInstruction` 读取系统提示词（已存在）
- **主题系统**：完全兼容现有5个主题

### 性能优化
- **CSS优化**：使用 transform 和 opacity 实现动画（GPU加速）
- **渲染优化**：避免复杂的滤镜和阴影叠加
- **导出兼容**：确保 html2canvas 能正确渲染新设计

### 代码组织
- **模块化**：将装饰元素拆分为独立组件或函数
- **可配置**：通过配置对象管理装饰元素的样式参数
- **可维护**：清晰的注释和类型定义

## 任务边界限制

### 包含范围
- ✅ 重构 `AestheticPreviewCard` 组件的装饰元素
- ✅ 添加系统提示词展示区域
- ✅ 优化信息组织和视觉层次
- ✅ 增强配色和视觉节奏

### 不包含范围
- ❌ 修改其他组件（Sidebar, Dashboard等）
- ❌ 修改数据模型或类型定义
- ❌ 修改导出功能逻辑（仅确保兼容）
- ❌ 修改其他标签页的布局

## 验收标准

### 功能验收
1. ✅ 内圈装饰元素具有3层以上的视觉层次
2. ✅ 系统提示词在预览卡片中清晰可见
3. ✅ 主提示词和系统提示词有明确的视觉区分
4. ✅ 空间利用率提升，无明显浪费
5. ✅ 所有主题下设计正常显示

### 视觉验收
1. ✅ 配色方案丰富，至少有3个层次的色彩
2. ✅ 视觉节奏感明显，元素大小和间距有规律
3. ✅ 信息层次清晰，易于阅读和理解
4. ✅ 整体美观度显著提升

### 技术验收
1. ✅ 代码符合项目规范，无lint错误
2. ✅ 响应式设计正常工作（移动端、平板、桌面）
3. ✅ 导出为图片功能正常（html2canvas兼容）
4. ✅ 性能无明显下降（渲染时间 < 100ms）

## 实现优先级

### Phase 1: 核心功能（必须）
1. 添加系统提示词展示区域
2. 重构装饰元素的基础层次

### Phase 2: 视觉增强（重要）
3. 增强配色方案和渐变效果
4. 优化信息组织和间距

### Phase 3: 细节优化（可选）
5. 添加微妙的动画效果
6. 进一步优化视觉节奏

## 风险评估

### 低风险
- 添加系统提示词展示：数据已存在，只需UI展示
- 装饰元素重构：不影响核心功能

### 中风险
- html2canvas兼容性：需要测试导出功能
- 性能影响：需要监控渲染性能

### 缓解措施
- 分阶段实施，每阶段完成后测试
- 保留原有代码逻辑，便于回滚
- 充分测试各主题和响应式场景

